{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport html2canvas from 'html2canvas';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../shared/service/student/student-info.service\";\nimport * as i2 from \"ngx-bootstrap/modal\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = [\"balanceSheetModal\"];\nfunction BalanceSheetComponent_ng_template_0_span_53_tbody_16_tr_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"b\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const item_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r5.key);\n  }\n}\nfunction BalanceSheetComponent_ng_template_0_span_53_tbody_16_tr_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 30);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 30);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 30);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 30);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 30);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const course_r9 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(course_r9.value[\"courseName\"]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(course_r9.value[\"courseId\"]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(course_r9.value[\"hours\"]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(course_r9.value[\"grade\"]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(course_r9.value[\"semester\"]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(course_r9.value[\"year\"]);\n  }\n}\nfunction BalanceSheetComponent_ng_template_0_span_53_tbody_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tbody\");\n    i0.ɵɵtemplate(1, BalanceSheetComponent_ng_template_0_span_53_tbody_16_tr_1_Template, 3, 1, \"tr\", 36);\n    i0.ɵɵtemplate(2, BalanceSheetComponent_ng_template_0_span_53_tbody_16_tr_2_Template, 13, 6, \"tr\", 35);\n    i0.ɵɵpipe(3, \"keyvalue\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r5.value.length !== 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(3, 2, item_r5.value));\n  }\n}\nfunction BalanceSheetComponent_ng_template_0_span_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 28)(1, \"table\", 29)(2, \"thead\")(3, \"tr\", 30)(4, \"th\", 31);\n    i0.ɵɵtext(5, \"COURSE TITLE\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\", 32);\n    i0.ɵɵtext(7, \"CS No\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\", 33);\n    i0.ɵɵtext(9, \"HR\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 34);\n    i0.ɵɵtext(11, \"GR\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\", 34);\n    i0.ɵɵtext(13, \"SEM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\", 34);\n    i0.ɵɵtext(15, \"YR\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(16, BalanceSheetComponent_ng_template_0_span_53_tbody_16_Template, 4, 4, \"tbody\", 35);\n    i0.ɵɵpipe(17, \"keyvalue\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const eachConc_r3 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(16);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(17, 1, eachConc_r3, ctx_r2.keepOrder));\n  }\n}\nfunction BalanceSheetComponent_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 1);\n    i0.ɵɵlistener(\"click\", function BalanceSheetComponent_ng_template_0_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.hide());\n    });\n    i0.ɵɵelementStart(1, \"span\", 2);\n    i0.ɵɵtext(2, \"\\u00D7\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"div\", 6)(7, \"span\", 7)(8, \"b\");\n    i0.ɵɵtext(9, \"Southern University Department of Computer Science\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(10, \"div\", 6)(11, \"span\", 8)(12, \"a\");\n    i0.ɵɵelement(13, \"img\", 9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"span\", 10)(15, \"b\");\n    i0.ɵɵtext(16, \"Bachelor of Science in Computer Science\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(17, \"div\", 6)(18, \"span\", 11)(19, \"b\");\n    i0.ɵɵtext(20, \"2018-2021 Balance Sheet\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(21, \"br\");\n    i0.ɵɵelementStart(22, \"div\", 6)(23, \"span\", 12);\n    i0.ɵɵtext(24, \" STUDENT NAME : \");\n    i0.ɵɵelementStart(25, \"b\");\n    i0.ɵɵtext(26);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(27, \"span\", 12);\n    i0.ɵɵtext(28, \" UNUMBER : \");\n    i0.ɵɵelementStart(29, \"b\");\n    i0.ɵɵtext(30);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(31, \"span\", 12);\n    i0.ɵɵtext(32, \" ADVISOR _________________\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(33, \"div\", 6)(34, \"span\", 13);\n    i0.ɵɵtext(35, \" CONCENTRATION : \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"span\", 14)(37, \"label\", 15);\n    i0.ɵɵtext(38, \" Cybersecurity \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(39, \"input\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(40, \"span\", 17)(41, \"label\", 15);\n    i0.ɵɵtext(42, \" Information Systems \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(43, \"input\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(44, \"span\", 14)(45, \"label\", 15);\n    i0.ɵɵtext(46, \" Scientific \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(47, \"input\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(48, \"span\", 14)(49, \"label\", 15);\n    i0.ɵɵtext(50, \" Mobile \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(51, \"input\", 16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(52, \"div\", 6);\n    i0.ɵɵtemplate(53, BalanceSheetComponent_ng_template_0_span_53_Template, 18, 4, \"span\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(54, \"br\");\n    i0.ɵɵelementStart(55, \"div\", 19)(56, \"span\", 20)(57, \"span\", 21);\n    i0.ɵɵtext(58, \" Approved _______________________________ \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(59, \"span\", 22);\n    i0.ɵɵtext(60, \"Advisor, Computer Science\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(61, \"span\", 23);\n    i0.ɵɵtext(62, \" Date _________________\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(63, \"span\", 20)(64, \"span\", 21);\n    i0.ɵɵtext(65, \" Approved _______________________________ \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(66, \"span\", 22);\n    i0.ɵɵtext(67, \"Chair, Computer Science\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(68, \"span\", 23);\n    i0.ɵɵtext(69, \" Date _________________\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(70, \"br\");\n    i0.ɵɵelementStart(71, \"div\", 19)(72, \"span\", 20)(73, \"span\", 21);\n    i0.ɵɵtext(74, \" Approved _______________________________ \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(75, \"span\", 22);\n    i0.ɵɵtext(76, \"Undergraduate Coordinator\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(77, \"span\", 23);\n    i0.ɵɵtext(78, \" Date _________________\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(79, \"span\", 20)(80, \"span\", 21);\n    i0.ɵɵtext(81, \" Approved _______________________________ \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(82, \"span\", 24);\n    i0.ɵɵtext(83, \"Dean, College of Sciences & Engineering\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(84, \"span\", 23);\n    i0.ɵɵtext(85, \" Date _________________\");\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(86, \"div\", 25)(87, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function BalanceSheetComponent_ng_template_0_Template_button_click_87_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.downloadReports());\n    });\n    i0.ɵɵtext(88, \" Print \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(89, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function BalanceSheetComponent_ng_template_0_Template_button_click_89_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.hide());\n    });\n    i0.ɵɵtext(90, \" Close \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(26);\n    i0.ɵɵtextInterpolate(ctx_r1.studentName);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.UNumber);\n    i0.ɵɵadvance(23);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.courseInfo2);\n  }\n}\nexport let BalanceSheetComponent = /*#__PURE__*/(() => {\n  var _class;\n  class BalanceSheetComponent {\n    constructor(studentInfoService, modalService, el) {\n      this.studentInfoService = studentInfoService;\n      this.modalService = modalService;\n      this.el = el;\n      this.courses = [{\n        'name': 'CMPS Seminar I',\n        'csno': '110B',\n        'hr': '3',\n        'gr': '3.7',\n        'sem': '3',\n        'yr': '2022'\n      }, {\n        'name': 'CMPS Seminar II',\n        'csno': '110B',\n        'hr': '3',\n        'gr': '3.7',\n        'sem': '3',\n        'yr': '2022'\n      }, {\n        'name': 'Discrete Structures',\n        'csno': '110B',\n        'hr': '3',\n        'gr': '3.7',\n        'sem': '3',\n        'yr': '2022'\n      }, {\n        'name': 'Data Structures',\n        'csno': '110B',\n        'hr': '3',\n        'gr': '3.7',\n        'sem': '3',\n        'yr': '2022'\n      }, {\n        'name': 'Java',\n        'csno': '110B',\n        'hr': '3',\n        'gr': '3.7',\n        'sem': '3',\n        'yr': '2022'\n      }];\n      this.studentData = {};\n      this.concentrationInfo = new Map();\n      this.concentrations = [];\n      this.triggerRefresh = new EventEmitter();\n      this.keepOrder = (a, b) => {\n        return 0;\n      };\n    }\n    ngOnInit() {\n      // this.getConcentrations();\n    }\n    showModal(uNumber) {\n      this.getStudentInfo(uNumber);\n      this.modalRef = this.modalService.show(this.balanceSheetModal, {\n        class: '',\n        ignoreBackdropClick: true\n      });\n    }\n    getStudentInfo(uNumber) {\n      this.studentInfoService.getStudentInfo(uNumber).subscribe(data => {\n        if (data.statusCode === 'SUCCESS') {\n          for (const eachCourse of data.response.courses) {\n            if (eachCourse.concentrationCode === 1015) {\n              this.concentrationInfo[1015].courses.push(eachCourse);\n              continue;\n            }\n            this.concentrationInfo[eachCourse.concentrationCode].courses[eachCourse.courseId] = eachCourse;\n          }\n          this.concentrations = Object.values(this.concentrationInfo);\n          this.studentName = data.response.firstName;\n          this.UNumber = data.response.unumber;\n          this.getSize();\n          console.log(this.concentrations);\n        } else {\n          console.log(data.message);\n        }\n      });\n    }\n    getConcentrations() {\n      this.studentInfoService.getConcentrationInfo().subscribe(data => {\n        if (data.statusCode === 'SUCCESS') {\n          this.concentrationInfo = data.response;\n          this.concentrationInfo[1015].courses = [];\n          this.concentrationInfo[1015].name = 'OTHERS';\n        } else {\n          console.log(data.message);\n        }\n      });\n    }\n    getSize() {\n      let total = 0;\n      this.courseInfo2 = new Array();\n      this.courseInfo = new Map();\n      for (const each of this.concentrations) {\n        this.courseInfo.set(each.name, []);\n        for (let [key, value] of Object.entries(each.courses)) {\n          total++;\n          this.courseInfo.get(each.name).push(value);\n          if (total % 35 === 0) {\n            this.courseInfo2.push(this.courseInfo);\n            this.courseInfo = new Map();\n            this.courseInfo.set(each.name, []);\n            total = 0;\n          }\n        }\n      }\n      this.courseInfo2.push(this.courseInfo);\n      this.firstTwoElements = this.courseInfo2.slice(0, 2);\n      this.remainingElements = this.courseInfo2.slice(2);\n      console.log(this.courseInfo2);\n    }\n    convetToPDF() {\n      html2canvas(document.getElementById(\"balanceSheetPrint\"), {\n        scale: 2\n      }).then(canvas => {\n        document.body.appendChild(canvas);\n      });\n      // html2canvas(document.getElementById(\"balanceSheetPrint\")).then(canvas => {\n      //   // Few necessary setting options\n      //   var imgWidth = 208;\n      //   var pageHeight = 295;\n      //   var imgHeight = canvas.height * imgWidth / canvas.width;\n      //   var heightLeft = imgHeight;\n      //   const contentDataURL = canvas.toDataURL('image/png')\n      //   let pdf = new jspdf('p', 'mm', 'a4'); // A4 size page of PDF\n      //   var position = 0;\n      //   pdf.addImage(contentDataURL, 'PNG', 0, position, imgWidth, imgHeight)\n      //   pdf.save('new-file.pdf'); // Generated PDF\n      //   });\n    }\n\n    hide() {\n      if (this.modalRef) {\n        this.modalRef.hide();\n      }\n      this.triggerRefresh.emit();\n      this.getConcentrations();\n    }\n    downloadReports() {\n      this.studentInfoService.reportDownloadUrl().subscribe(data => {\n        const studentReport = new Blob([data], {\n          type: 'application/pdf'\n        });\n        const fileURL = URL.createObjectURL(studentReport);\n        window.open(fileURL, '_blank');\n      });\n    }\n  }\n  _class = BalanceSheetComponent;\n  _class.ɵfac = function BalanceSheetComponent_Factory(t) {\n    return new (t || _class)(i0.ɵɵdirectiveInject(i1.StudentInfoService), i0.ɵɵdirectiveInject(i2.BsModalService), i0.ɵɵdirectiveInject(i0.ElementRef));\n  };\n  _class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _class,\n    selectors: [[\"app-balance-sheet\"]],\n    viewQuery: function BalanceSheetComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.balanceSheetModal = _t.first);\n      }\n    },\n    outputs: {\n      triggerRefresh: \"triggerRefresh\"\n    },\n    decls: 2,\n    vars: 0,\n    consts: [[\"balanceSheetModal\", \"\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"btn\", \"close\", \"pull-right\", 2, \"width\", \"35px\", \"margin-left\", \"963px\", \"text-align\", \"center\", \"padding-right\", \"0px\", \"padding-left\", \"0px\", \"background-color\", \"#afd6f9\", 3, \"click\"], [\"aria-hidden\", \"true\"], [\"id\", \"balanceSheetPrint\"], [1, \"container-fluid\"], [2, \"margin-bottom\", \"2.5cm\", \"margin-left\", \"1.5cm\", \"margin-right\", \"1.5cm\"], [1, \"row\"], [2, \"font-size\", \"15px\", \"text-align\", \"center\", \"margin-top\", \"1.5cm\"], [1, \"col-md-3\", \"text-center\"], [\"src\", \"../assets/CMPSLogo.png\", \"width\", \"100\", \"height\", \"30\"], [1, \"col-md-6\", 2, \"font-size\", \"15px\", \"text-align\", \"center\", \"padding-top\", \"4px\"], [2, \"font-size\", \"15px\", \"text-align\", \"center\"], [1, \"col-md-4\", 2, \"text-align\", \"center\", \"font-size\", \"12px\"], [1, \"col-md-2\", 2, \"text-align\", \"right\", \"font-size\", \"12px\"], [1, \"col-md-2\", 2, \"text-align\", \"center\", \"font-size\", \"12px\"], [\"for\", \"flexCheckDisabled\", 1, \"form-check-label\", 2, \"margin-right\", \"5px\"], [\"type\", \"checkbox\", \"value\", \"\", 1, \"form-check-input\"], [1, \"col-md-3\", 2, \"text-align\", \"center\", \"font-size\", \"12px\"], [\"class\", \"col-md-6\", 4, \"ngFor\", \"ngForOf\"], [1, \"row\", 2, \"font-size\", \"10px\"], [1, \"col-md-3\"], [1, \"row\", 2, \"text-align\", \"center\", \"margin-left\", \"0px\", \"margin-right\", \"0px\"], [1, \"row\", 2, \"text-align\", \"center\", \"padding-left\", \"60px\", \"margin-right\", \"0px\"], [1, \"col-md-3\", 2, \"text-align\", \"center\", \"padding-top\", \"2px\"], [1, \"row\", 2, \"text-align\", \"center\", \"padding-left\", \"40px\", \"margin-right\", \"0px\"], [2, \"padding-left\", \"370px\", \"margin-bottom\", \"20px\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-sm\", \"btnW\", 2, \"width\", \"20px\", \"background-color\", \"#ffc107\", \"border-color\", \"#ffc107\", \"color\", \"rgba(0, 23, 56, 0.9)\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-sm\", \"btnW\", 2, \"width\", \"20px\", \"background-color\", \"#afd6f9\", \"border-color\", \"#afd6f9\", \"color\", \"rgba(0, 23, 56, 0.9)\", \"margin-left\", \"15px\", 3, \"click\"], [1, \"col-md-6\"], [1, \"tab\", 2, \"width\", \"100%\", \"font-size\", \"10px\"], [2, \"text-align\", \"center\"], [\"width\", \"50%\"], [\"width\", \"15%\"], [\"width\", \"5%\"], [\"width\", \"10%\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"]],\n    template: function BalanceSheetComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, BalanceSheetComponent_ng_template_0_Template, 91, 3, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i3.KeyValuePipe],\n    encapsulation: 2\n  });\n  return BalanceSheetComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}