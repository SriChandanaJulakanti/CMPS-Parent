{"ast":null,"code":"import _defineProperty from \"C:/Users/julak/eclipse-workspace/cmps/cmpsUI/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport * as i0 from '@angular/core';\nimport { Injectable, Directive, Input, HostListener, NgModule } from '@angular/core';\nlet PrintBase = /*#__PURE__*/(() => {\n  var _class;\n  class PrintBase {\n    constructor() {\n      _defineProperty(this, \"_printStyle\", []);\n      _defineProperty(this, \"_styleSheetFile\", '');\n    }\n    //#region Getters and Setters\n    /**\n     * Sets the print styles based on the provided values.\n     *\n     * @param {Object} values - Key-value pairs representing print styles.\n     * @protected\n     */\n    setPrintStyle(values) {\n      this._printStyle = [];\n      for (let key in values) {\n        if (values.hasOwnProperty(key)) {\n          this._printStyle.push((key + JSON.stringify(values[key])).replace(/['\"]+/g, ''));\n        }\n      }\n    }\n    /**\n     *\n     *\n     * @returns the string that create the stylesheet which will be injected\n     * later within <style></style> tag.\n     *\n     * -join/replace to transform an array objects to css-styled string\n     */\n    returnStyleValues() {\n      return `<style> ${this._printStyle.join(' ').replace(/,/g, ';')} </style>`;\n    }\n    /**\n    * @returns string which contains the link tags containing the css which will\n    * be injected later within <head></head> tag.\n    *\n    */\n    returnStyleSheetLinkTags() {\n      return this._styleSheetFile;\n    }\n    /**\n     * Sets the style sheet file based on the provided CSS list.\n     *\n     * @param {string} cssList - CSS file or list of CSS files.\n     * @protected\n     */\n    setStyleSheetFile(cssList) {\n      let linkTagFn = function (cssFileName) {\n        return `<link rel=\"stylesheet\" type=\"text/css\" href=\"${cssFileName}\">`;\n      };\n      if (cssList.indexOf(',') !== -1) {\n        const valueArr = cssList.split(',');\n        this._styleSheetFile = valueArr.map(val => linkTagFn(val)).join('');\n      } else {\n        this._styleSheetFile = linkTagFn(cssList);\n      }\n    }\n    //#endregion\n    //#region Private methods used by PrintBase\n    /**\n     * Updates the default values for input elements.\n     *\n     * @param {HTMLCollectionOf<HTMLInputElement>} elements - Collection of input elements.\n     * @private\n     */\n    updateInputDefaults(elements) {\n      for (let i = 0; i < elements.length; i++) {\n        const element = elements[i];\n        element['defaultValue'] = element.value;\n        if (element['checked']) element['defaultChecked'] = true;\n      }\n    }\n    /**\n     * Updates the default values for select elements.\n     *\n     * @param {HTMLCollectionOf<HTMLSelectElement>} elements - Collection of select elements.\n     * @private\n     */\n    updateSelectDefaults(elements) {\n      for (let i = 0; i < elements.length; i++) {\n        const element = elements[i];\n        const selectedIdx = element.selectedIndex;\n        const selectedOption = element.options[selectedIdx];\n        selectedOption.defaultSelected = true;\n      }\n    }\n    /**\n     * Updates the default values for textarea elements.\n     *\n     * @param {HTMLCollectionOf<HTMLTextAreaElement>} elements - Collection of textarea elements.\n     * @private\n     */\n    updateTextAreaDefaults(elements) {\n      for (let i = 0; i < elements.length; i++) {\n        const element = elements[i];\n        element['defaultValue'] = element.value;\n      }\n    }\n    /**\n     * Converts a canvas element to an image and returns its HTML string.\n     *\n     * @param {HTMLCanvasElement} element - The canvas element to convert.\n     * @returns {string} - HTML string of the image.\n     * @private\n     */\n    canvasToImageHtml(element) {\n      const dataUrl = element.toDataURL();\n      return `<img src=\"${dataUrl}\" style=\"max-width: 100%;\">`;\n    }\n    /**\n     * Includes canvas contents in the print section via img tags.\n     *\n     * @param {HTMLCollectionOf<HTMLCanvasElement>} elements - Collection of canvas elements.\n     * @private\n     */\n    updateCanvasToImage(elements) {\n      for (let i = 0; i < elements.length; i++) {\n        const element = this.canvasToImageHtml(elements[i]);\n        elements[i].insertAdjacentHTML('afterend', element);\n        elements[i].remove();\n      }\n    }\n    /**\n     * Retrieves the HTML content of a specified printing section.\n     *\n     * @param {string} printSectionId - Id of the printing section.\n     * @returns {string | null} - HTML content of the printing section, or null if not found.\n     * @private\n     */\n    getHtmlContents(printSectionId) {\n      const printContents = document.getElementById(printSectionId);\n      if (!printContents) return null;\n      const inputEls = printContents.getElementsByTagName('input');\n      const selectEls = printContents.getElementsByTagName('select');\n      const textAreaEls = printContents.getElementsByTagName('textarea');\n      const canvasEls = printContents.getElementsByTagName('canvas');\n      this.updateInputDefaults(inputEls);\n      this.updateSelectDefaults(selectEls);\n      this.updateTextAreaDefaults(textAreaEls);\n      this.updateCanvasToImage(canvasEls);\n      return printContents.innerHTML;\n    }\n    /**\n     * Retrieves the HTML content of elements with the specified tag.\n     *\n     * @param {keyof HTMLElementTagNameMap} tag - HTML tag name.\n     * @returns {string} - Concatenated outerHTML of elements with the specified tag.\n     * @private\n     */\n    getElementTag(tag) {\n      const html = [];\n      const elements = document.getElementsByTagName(tag);\n      for (let index = 0; index < elements.length; index++) {\n        html.push(elements[index].outerHTML);\n      }\n      return html.join('\\r\\n');\n    }\n    //#endregion\n    /**\n     * Prints the specified content using the provided print options.\n     *\n     * @param {PrintOptions} printOptions - Options for printing.\n     * @public\n     */\n    print(printOptions) {\n      let styles = '',\n        links = '',\n        popOut = 'top=0,left=0,height=auto,width=auto';\n      const baseTag = this.getElementTag('base');\n      if (printOptions.useExistingCss) {\n        styles = this.getElementTag('style');\n        links = this.getElementTag('link');\n      }\n      // If the openNewTab option is set to true, then set the popOut option to an empty string. \n      // This will cause the print dialog to open in a new tab.\n      if (printOptions.openNewTab) {\n        popOut = '';\n      }\n      const printContents = this.getHtmlContents(printOptions.printSectionId);\n      if (!printContents) {\n        // Handle the case where the specified print section is not found.\n        console.error(`Print section with id ${printOptions.printSectionId} not found.`);\n        return;\n      }\n      const popupWin = window.open(\"\", \"_blank\", popOut);\n      if (!popupWin) {\n        // the popup window could not be opened.\n        console.error('Could not open print window.');\n        return;\n      }\n      popupWin.document.open();\n      popupWin.document.write(`\n          <html>\n            <head>\n              <title>${printOptions.printTitle ? printOptions.printTitle : \"\"}</title>\n              ${baseTag}\n              ${this.returnStyleValues()}\n              ${this.returnStyleSheetLinkTags()}\n              ${styles}\n              ${links}\n            </head>\n            <body ${printOptions.bodyClass ? `class=\"${printOptions.bodyClass}\"` : ''}>\n              ${printContents}\n              <script defer>\n                function triggerPrint(event) {\n                  window.removeEventListener('load', triggerPrint, false);\n                  ${printOptions.previewOnly ? '' : `setTimeout(function() {\n                    closeWindow(window.print());\n                  }, ${printOptions.printDelay});`}\n                }\n                function closeWindow(){\n                  ${printOptions.closeWindow ? 'window.close();' : ''}\n                }\n                window.addEventListener('load', triggerPrint, false);\n              </script>\n            </body>\n          </html>`);\n      popupWin.document.close();\n    }\n  }\n  _class = PrintBase;\n  _defineProperty(PrintBase, \"\\u0275fac\", function _class_Factory(t) {\n    return new (t || _class)();\n  });\n  _defineProperty(PrintBase, \"\\u0275prov\", /* @__PURE__ */i0.ɵɵdefineInjectable({\n    token: _class,\n    factory: _class.ɵfac,\n    providedIn: 'root'\n  }));\n  return PrintBase;\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Service for handling printing functionality in Angular applications.\n * Extends the base printing class (PrintBase).\n *\n * @export\n * @class NgxPrintService\n * @extends {PrintBase}\n */\nlet NgxPrintService = /*#__PURE__*/(() => {\n  var _class2;\n  class NgxPrintService extends PrintBase {\n    /**\n     * Initiates the printing process using the provided print options.\n     *\n     * @param {PrintOptions} printOptions - Options for configuring the printing process.\n     * @memberof NgxPrintService\n     * @returns {void}\n     */\n    print(printOptions) {\n      // Call the print method in the parent class\n      super.print(printOptions);\n    }\n    /**\n     * Sets the print style for the printing process.\n     *\n     * @param {{ [key: string]: { [key: string]: string } }} values - A dictionary representing the print styles.\n     * @memberof NgxPrintService\n     * @setter\n     */\n    set printStyle(values) {\n      super.setPrintStyle(values);\n    }\n    /**\n     * Sets the stylesheet file for the printing process.\n     *\n     * @param {string} cssList - A string representing the path to the stylesheet file.\n     * @memberof NgxPrintService\n     * @setter\n     */\n    set styleSheetFile(cssList) {\n      super.setStyleSheetFile(cssList);\n    }\n  }\n  _class2 = NgxPrintService;\n  _defineProperty(NgxPrintService, \"\\u0275fac\", /* @__PURE__ */function () {\n    let ɵ_class2_BaseFactory;\n    return function _class2_Factory(t) {\n      return (ɵ_class2_BaseFactory || (ɵ_class2_BaseFactory = i0.ɵɵgetInheritedFactory(_class2)))(t || _class2);\n    };\n  }());\n  _defineProperty(NgxPrintService, \"\\u0275prov\", /* @__PURE__ */i0.ɵɵdefineInjectable({\n    token: _class2,\n    factory: _class2.ɵfac,\n    providedIn: \"root\"\n  }));\n  return NgxPrintService;\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nclass PrintOptions {\n  constructor(options) {\n    _defineProperty(this, \"printSectionId\", null);\n    _defineProperty(this, \"printTitle\", null);\n    _defineProperty(this, \"useExistingCss\", false);\n    _defineProperty(this, \"bodyClass\", '');\n    _defineProperty(this, \"openNewTab\", false);\n    _defineProperty(this, \"previewOnly\", false);\n    _defineProperty(this, \"closeWindow\", true);\n    _defineProperty(this, \"printDelay\", 0);\n    if (options) {\n      Object.assign(this, options);\n    }\n  }\n}\nlet NgxPrintDirective = /*#__PURE__*/(() => {\n  var _class4;\n  class NgxPrintDirective extends PrintBase {\n    constructor(...args) {\n      super(...args);\n      _defineProperty(this, \"printOptions\", new PrintOptions());\n    }\n    /**\n     * Prevents the print dialog from opening on the window\n     *\n     * @memberof NgxPrintDirective\n     */\n    set previewOnly(value) {\n      this.printOptions = {\n        ...this.printOptions,\n        previewOnly: value\n      };\n    }\n    /**\n     *\n     *\n     * @memberof NgxPrintDirective\n     */\n    set printSectionId(value) {\n      this.printOptions = {\n        ...this.printOptions,\n        printSectionId: value\n      };\n    }\n    /**\n     *\n     *\n     * @memberof NgxPrintDirective\n     */\n    set printTitle(value) {\n      this.printOptions = {\n        ...this.printOptions,\n        printTitle: value\n      };\n    }\n    /**\n     *\n     *\n     * @memberof NgxPrintDirective\n     */\n    set useExistingCss(value) {\n      this.printOptions = {\n        ...this.printOptions,\n        useExistingCss: value\n      };\n    }\n    /**\n     * A delay in milliseconds to force the print dialog to wait before opened. Default: 0\n     *\n     * @memberof NgxPrintDirective\n     */\n    set printDelay(value) {\n      this.printOptions = {\n        ...this.printOptions,\n        printDelay: value\n      };\n    }\n    /**\n     * Whether to close the window after print() returns.\n     *\n     */\n    set closeWindow(value) {\n      this.printOptions = {\n        ...this.printOptions,\n        closeWindow: value\n      };\n    }\n    /**\n     * Class attribute to apply to the body element.\n     *\n     */\n    set bodyClass(value) {\n      this.printOptions = {\n        ...this.printOptions,\n        bodyClass: value\n      };\n    }\n    /**\n     * Whether to open a new window or default to new window.\n     *\n     */\n    set openNewTab(value) {\n      this.printOptions = {\n        ...this.printOptions,\n        openNewTab: value\n      };\n    }\n    /**\n     *\n     *\n     * @memberof NgxPrintDirective\n     */\n    set printStyle(values) {\n      super.setPrintStyle(values);\n    }\n    /**\n     * @memberof NgxPrintDirective\n     * @param cssList\n     */\n    set styleSheetFile(cssList) {\n      super.setStyleSheetFile(cssList);\n    }\n    /**\n     *\n     *\n     * @memberof NgxPrintDirective\n     */\n    print() {\n      super.print(this.printOptions);\n    }\n  }\n  _class4 = NgxPrintDirective;\n  _defineProperty(NgxPrintDirective, \"\\u0275fac\", /* @__PURE__ */function () {\n    let ɵ_class4_BaseFactory;\n    return function _class4_Factory(t) {\n      return (ɵ_class4_BaseFactory || (ɵ_class4_BaseFactory = i0.ɵɵgetInheritedFactory(_class4)))(t || _class4);\n    };\n  }());\n  _defineProperty(NgxPrintDirective, \"\\u0275dir\", /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: _class4,\n    selectors: [[\"button\", \"ngxPrint\", \"\"]],\n    hostBindings: function _class4_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"click\", function _class4_click_HostBindingHandler() {\n          return ctx.print();\n        });\n      }\n    },\n    inputs: {\n      previewOnly: \"previewOnly\",\n      printSectionId: \"printSectionId\",\n      printTitle: \"printTitle\",\n      useExistingCss: \"useExistingCss\",\n      printDelay: \"printDelay\",\n      closeWindow: \"closeWindow\",\n      bodyClass: \"bodyClass\",\n      openNewTab: \"openNewTab\",\n      printStyle: \"printStyle\",\n      styleSheetFile: \"styleSheetFile\"\n    },\n    standalone: true,\n    features: [i0.ɵɵInheritDefinitionFeature]\n  }));\n  return NgxPrintDirective;\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet NgxPrintModule = /*#__PURE__*/(() => {\n  var _class5;\n  class NgxPrintModule {}\n  _class5 = NgxPrintModule;\n  _defineProperty(NgxPrintModule, \"\\u0275fac\", function _class5_Factory(t) {\n    return new (t || _class5)();\n  });\n  _defineProperty(NgxPrintModule, \"\\u0275mod\", /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: _class5\n  }));\n  _defineProperty(NgxPrintModule, \"\\u0275inj\", /* @__PURE__ */i0.ɵɵdefineInjector({}));\n  return NgxPrintModule;\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/*\n * Public API Surface of ngx-print\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { NgxPrintDirective, NgxPrintModule, NgxPrintService, PrintOptions };\n//# sourceMappingURL=ngx-print.mjs.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}